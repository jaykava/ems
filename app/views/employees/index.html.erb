<div class="row">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3">Employee Management</h1>
      <%= link_to "Add New Employee", new_employee_path, class: "btn btn-primary" %>
    </div>

    <!-- Stats Cards -->
    <div class="row mb-4">
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Total Employees</h5>
            <h2 class="text-primary"><%= @total_employees %></h2>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Active</h5>
            <h2 class="text-success"><%= @active_count %></h2>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card text-center">
          <div class="card-body">
            <h5 class="card-title">Inactive</h5>
            <h2 class="text-secondary"><%= @inactive_count %></h2>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filters -->
    <div class="card mb-4">
      <div class="card-body">
        <%= form_with url: employees_path, method: :get, local: true, class: "row g-3" do |f| %>
          <div class="col-md-6">
            <%= f.text_field :search, placeholder: "Search by name, email, or position...", 
                            value: params[:search], class: "form-control" %>
          </div>
          <div class="col-md-3">
            <%= f.select :status, 
                        options_for_select([['All Status', ''], ['Active', 'active'], ['Inactive', 'inactive']], params[:status]),
                        {}, { class: "form-select" } %>
          </div>
          <div class="col-md-3">
            <div class="d-grid gap-2 d-md-flex">
              <%= f.submit "Search", class: "btn btn-outline-primary" %>
              <%= link_to "Clear", employees_path, class: "btn btn-outline-secondary" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Employees Table -->
    <div class="card">
      <div class="card-header">
        <h5 class="card-title mb-0">Employees List</h5>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Position</th>
                <th>Status</th>
                <th width="200">Actions</th>
              </tr>
            </thead>
            <tbody>
              <% if @employees.any? %>
                <% @employees.each do |employee| %>
                  <tr>
                    <td>
                      <div class="fw-bold"><%= employee.full_name %></div>
                    </td>
                    <td><%= employee.email %></td>
                    <td><%= employee.phone.presence || '-' %></td>
                    <td>
                      <span class="badge bg-info"><%= employee.position %></span>
                    </td>
                    <td>
                      <span class="badge bg-<%= employee.status_badge_class %>">
                        <%= employee.status.humanize %>
                      </span>
                    </td>
                    <td>
                      <div class="btn-group" role="group" style="gap: 10px;">
                        <%= link_to employee_path(employee), class: "btn btn-sm btn-outline-info", title: "View" do %>
                          <i class="bi bi-eye"></i>
                        <% end %>
                        <%= link_to edit_employee_path(employee), class: "btn btn-sm btn-outline-primary", title: "Edit" do %>
                          <i class="bi bi-pencil"></i>
                        <% end %>
                        <%= link_to toggle_status_employee_path(employee),
                                    class: "btn btn-sm btn-outline-warning",
                                    title: "Toggle Status",
                                    data: { turbo_method: :patch } do %>
                          <i class="bi bi-toggle-<%= employee.active? ? 'on' : 'off' %>"></i>
                        <% end %>

                        <%= button_to employee_path(employee),
                                      method: :delete,
                                      class: "btn btn-sm btn-outline-danger",
                                      title: "Soft Delete" do %>
                          <i class="bi bi-trash"></i>
                        <% end %>


                      </div>
                    </td>
                  </tr>
                <% end %>
              <% else %>
                <tr>
                  <td colspan="6" class="text-center py-4">
                    <div class="text-muted">
                      <i class="bi bi-inbox display-4 d-block mb-2"></i>
                      No employees found.
                    </div>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
      <div style="text-align: center;margin-top: 15px;">
        <%= paginate @employees, theme: 'bootstrap-5',
                    pagination_class: "pagination-sm flex-wrap justify-content-center",
                    nav_class: "d-inline-block" %>
        </div>
    </div>
  </div>
</div>